<div class="comments-section">
  <!-- Add Comment Form -->
  <form #commentForm="ngForm" class="comment-form">
    <textarea
      [(ngModel)]="newCommentText"
      name="commentText"
      required
      minlength="1"
      placeholder="Write a comment..."
    ></textarea>
    <button type="submit" [disabled]="commentForm.invalid">Post</button>
  </form>

  <!-- List of Comments -->

  <div *ngFor="let comment of comments" class="comment">
    <div *ngIf="editCommentId !== comment.id">
      <strong>{{ comment.user?.name }}</strong>:
      <span>{{ comment.text }}</span>
      <small class="date">{{ comment.createdAt | date: 'short' }}</small>
      <button (click)="startEdit(comment)">✏️</button>
      <button (click)="deleteComment(comment)">🗑️</button>
    </div>

    <div *ngIf="editCommentId === comment.id">
      <textarea [(ngModel)]="editCommentText" name="editText"></textarea>
      <button (click)="updateComment(comment.id)">✅ Save</button>
      <button (click)="cancelEdit()">❌ Cancel</button>
    </div>
  </div>
</div>
